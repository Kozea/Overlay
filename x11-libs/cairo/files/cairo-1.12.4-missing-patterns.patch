# https://bugs.freedesktop.org/show_bug.cgi?id=55799
# http://lists.cairographics.org/archives/cairo/2012-October/023618.html

--- src/cairo-recording-surface.c
+++ src/cairo-recording-surface.c
@@ -1441,7 +1441,7 @@ _cairo_recording_surface_snapshot (void *abstract_other)
     surface->optimize_clears = TRUE;

     _cairo_array_init (&surface->commands, sizeof (cairo_command_t *));
-    status = _cairo_recording_surface_copy (other, surface);
+    status = _cairo_recording_surface_copy (surface, other);
     if (unlikely (status)) {
        cairo_surface_destroy (&surface->base);
        return _cairo_surface_create_in_error (status);
--- src/cairo-recording-surface.c
+++ src/cairo-recording-surface.c
@@ -1446,6 +1446,8 @@ _cairo_recording_surface_snapshot (void *abstract_other)
 	cairo_surface_destroy (&surface->base);
 	return _cairo_surface_create_in_error (status);
     }
+    if (surface->commands.num_elements != 0)
+	surface->base.is_clear = FALSE;
 
     return &surface->base;
 }
